@model BigViewModel
@{
    ViewBag.Title = "editConcept";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<style type="text/css">
    .thumb-image {
        float: left;
        width: 100px;
        position: relative;
        padding: 5px;
    }
</style>
<h2>Cập nhật đồ vật</h2>
<div>
    @using (Html.BeginForm("updateNewConcept", "Object", FormMethod.Post, new { enctype = "multipart/form-data" }))
                {
        <div class="row">
            <div class="col-md-6">
                <table style="width: auto;">
                    <tr>
                        <td>ID: <label>@Model.ConceptId</label></td>
                                   
                    </tr>
                    <tr>                  
                        <td>Tên đồ vật:<br><input type="text" name="conceptName" value="@Model.ConceptName" /></td>
                    </tr>
                    <tr>                        
                        <td>Mô tả:<br><input type="text" name="conceptDes" value="@Model.ConceptDescription" /></td>
                    </tr>
                    <tr>
                        <td>Ngày tạo: @Model.CreateDate</td>                        
                    </tr>
                    <tr>
                        <td>
                            Thêm hình: <input type="file" name="fileUpload" id="fileUpload" multiple="multiple" />
                            <div id="image-holder"></div>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <input type="submit" value="Cập Nhật" class="btn btn-success" />
                        </td>
                    </tr>
                </table>
            </div>
            <div class="clearfix"></div>
            <div class="row">


                @foreach (var item in Model.PictureList)
                {
                    <div class="col-md-4" style="border: solid 1px; pading: 4px 7px 2px 4px;">
                        <div style="margin:auto;">
                            <div style="overflow:hidden;height:250px;">
                                <img src="@item.ImageURL" style="width:100%;" />
                            </div>
                            <div class="clearfix"></div>
                            <div class="btn-group" style="margin:auto;text-align:center;">

                                <a class="btn btn-danger" href="@Url.Action("deleteObject", new { picId = item.PictureId,conceptId = item.ConceptId })">
                                    Delete Image
                                </a>

                            </div>
                        </div>
                       
                    </div>
                }
            </div>
        </div>
    }
</div>
<script>
    $(document).ready(function() {
            $("#fileUpload").on('change', function() {
              //Get count of selected files
              var countFiles = $(this)[0].files.length;
              var imgPath = $(this)[0].value;
              var extn = imgPath.substring(imgPath.lastIndexOf('.') + 1).toLowerCase();
              var image_holder = $("#image-holder");
              image_holder.empty();
              if (extn == "gif" || extn == "png" || extn == "jpg" || extn == "jpeg") {
                if (typeof(FileReader) != "undefined") {
                  //loop for each file selected for uploaded.
                  for (var i = 0; i < countFiles; i++)
                  {
                    var reader = new FileReader();
                    reader.onload = function(e) {
                      $("<img />", {
                        "src": e.target.result,
                        "class": "thumb-image"
                      }).appendTo(image_holder);
                    }
                    image_holder.show();
                    reader.readAsDataURL($(this)[0].files[i]);
                  }
                } else {
                  alert("This browser does not support FileReader.");
                }
              } else {
                alert("Pls select only images");
              }
            });
          });
</script>
